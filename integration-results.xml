<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="5" skipped="29" tests="92" time="11.293" timestamp="2025-09-29T18:03:18.522256-07:00" hostname="Nokia-1396.local"><testcase classname="tests.integration.test_agent_guided_formula_construction.TestAgentGuidedFormulaConstruction" name="test_formula_service_suggest_formulas" time="0.006" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestAgentGuidedFormulaConstruction" name="test_formula_service_preview_design_matrix" time="0.004" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestAgentGuidedFormulaConstruction" name="test_formula_service_power_estimation" time="0.000" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestAgentGuidedFormulaConstruction" name="test_workflow_tracker_basic_functionality" time="0.005" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestAgentGuidedFormulaConstruction" name="test_workflow_tracker_comparison" time="0.004" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestAgentGuidedFormulaConstruction" name="test_agent_formula_suggestion_integration" time="0.145" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestAgentGuidedFormulaConstruction" name="test_formula_parsing_edge_cases" time="0.004" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestAgentGuidedFormulaConstruction" name="test_error_handling" time="0.003" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestAgentGuidedFormulaConstruction" name="test_workflow_export_import" time="0.004" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestFormulaConstructionWorkflow" name="test_complete_workflow_simulation" time="0.004" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestFormulaConstructionWorkflow" name="test_formula_validation_edge_cases" time="0.003" /><testcase classname="tests.integration.test_agent_guided_formula_construction.TestFormulaConstructionWorkflow" name="test_workflow_tracker_comprehensive" time="0.001" /><testcase classname="tests.integration.test_agent_workflows.TestBasicAgentWorkflows" name="test_supervisor_agent_initialization" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:106: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestBasicAgentWorkflows" name="test_data_expert_to_singlecell_handoff" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:125: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestBasicAgentWorkflows" name="test_research_agent_workflow" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:160: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestBasicAgentWorkflows" name="test_method_expert_parameter_extraction" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:183: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestComplexMultiAgentWorkflows" name="test_complete_single_cell_analysis_workflow" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:217: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestComplexMultiAgentWorkflows" name="test_research_guided_analysis_workflow" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:281: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestComplexMultiAgentWorkflows" name="test_parallel_agent_execution" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:347: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestComplexMultiAgentWorkflows" name="test_workflow_error_recovery" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:399: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestAgentCommunication" name="test_context_preservation_across_agents" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:460: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestAgentCommunication" name="test_cross_agent_data_references" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:506: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestAgentCommunication" name="test_agent_capability_negotiation" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:579: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestWorkflowPerformanceMonitoring" name="test_workflow_execution_timing" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:625: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestWorkflowPerformanceMonitoring" name="test_workflow_resource_monitoring" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:674: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestWorkflowPerformanceMonitoring" name="test_workflow_progress_tracking" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:709: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestWorkflowStateManagement" name="test_workflow_state_serialization" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:761: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestWorkflowStateManagement" name="test_workflow_checkpoint_recovery" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:798: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_agent_workflows.TestWorkflowStateManagement" name="test_workflow_branching_and_merging" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_agent_workflows.py:831: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_client_integration.TestAgentClientIntegration" name="test_client_initialization_with_real_workspace" time="0.001" /><testcase classname="tests.integration.test_client_integration.TestAgentClientIntegration" name="test_file_operations_integration" time="0.004" /><testcase classname="tests.integration.test_client_integration.TestAgentClientIntegration" name="test_conversation_flow_integration" time="0.002" /><testcase classname="tests.integration.test_client_integration.TestAgentClientIntegration" name="test_session_export_integration" time="0.002" /><testcase classname="tests.integration.test_client_integration.TestAgentClientIntegration" name="test_error_recovery_integration" time="0.001" /><testcase classname="tests.integration.test_client_integration.TestAPIAgentClientIntegration" name="test_api_client_initialization_integration" time="0.000"><skipped type="pytest.skip" message="APIAgentClient not available (private repo only)">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_client_integration.py:264: APIAgentClient not available (private repo only)</skipped></testcase><testcase classname="tests.integration.test_client_integration.TestAPIAgentClientIntegration" name="test_file_upload_integration" time="0.000"><skipped type="pytest.skip" message="APIAgentClient not available (private repo only)">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_client_integration.py:282: APIAgentClient not available (private repo only)</skipped></testcase><testcase classname="tests.integration.test_client_integration.TestAPIAgentClientIntegration" name="test_workspace_files_integration" time="0.000"><skipped type="pytest.skip" message="APIAgentClient not available (private repo only)">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_client_integration.py:318: APIAgentClient not available (private repo only)</skipped></testcase><testcase classname="tests.integration.test_client_integration.TestClientPerformanceIntegration" name="test_concurrent_client_operations" time="0.003" /><testcase classname="tests.integration.test_client_integration.TestClientPerformanceIntegration" name="test_large_file_handling" time="0.066" /><testcase classname="tests.integration.test_client_integration.TestClientPerformanceIntegration" name="test_memory_usage_with_long_conversations" time="0.011" /><testcase classname="tests.integration.test_client_integration.TestClientEdgeCasesIntegration" name="test_workspace_permission_issues" time="0.001" /><testcase classname="tests.integration.test_client_integration.TestClientEdgeCasesIntegration" name="test_corrupted_file_handling" time="0.001" /><testcase classname="tests.integration.test_client_integration.TestClientEdgeCasesIntegration" name="test_network_timeout_simulation" time="0.107" /><testcase classname="tests.integration.test_client_integration.TestClientEdgeCasesIntegration" name="test_api_client_cleanup_integration" time="0.000"><skipped type="pytest.skip" message="APIAgentClient not available (private repo only)">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_client_integration.py:522: APIAgentClient not available (private repo only)</skipped></testcase><testcase classname="tests.integration.test_client_performance.TestClientMemoryLeaks" name="test_agent_client_memory_leak" time="0.416" /><testcase classname="tests.integration.test_client_performance.TestClientMemoryLeaks" name="test_conversation_history_memory" time="0.950" /><testcase classname="tests.integration.test_client_performance.TestClientMemoryLeaks" name="test_file_operations_memory" time="0.320" /><testcase classname="tests.integration.test_client_performance.TestClientPerformanceBenchmarks" name="test_query_processing_performance" time="0.004" /><testcase classname="tests.integration.test_client_performance.TestClientPerformanceBenchmarks" name="test_concurrent_query_performance" time="0.005" /><testcase classname="tests.integration.test_client_performance.TestClientPerformanceBenchmarks" name="test_file_operation_performance" time="0.716" /><testcase classname="tests.integration.test_client_performance.TestClientPerformanceBenchmarks" name="test_memory_efficiency_under_load" time="1.536" /><testcase classname="tests.integration.test_client_performance.TestResourceCleanup" name="test_client_resource_cleanup" time="0.280" /><testcase classname="tests.integration.test_client_performance.TestResourceCleanup" name="test_thread_cleanup" time="0.670" /><testcase classname="tests.integration.test_client_performance.TestResourceCleanup" name="test_file_handle_cleanup" time="0.037" /><testcase classname="tests.integration.test_data_pipelines.TestBasicPipelineExecution" name="test_simple_linear_pipeline" time="0.002" /><testcase classname="tests.integration.test_data_pipelines.TestBasicPipelineExecution" name="test_branching_pipeline" time="0.001" /><testcase classname="tests.integration.test_data_pipelines.TestBasicPipelineExecution" name="test_conditional_pipeline_execution" time="0.001" /><testcase classname="tests.integration.test_data_pipelines.TestBasicPipelineExecution" name="test_pipeline_parameter_propagation" time="0.001" /><testcase classname="tests.integration.test_data_pipelines.TestMultiModalPipelines" name="test_transcriptomics_proteomics_integration" time="0.015" /><testcase classname="tests.integration.test_data_pipelines.TestMultiModalPipelines" name="test_spatial_transcriptomics_pipeline" time="0.001" /><testcase classname="tests.integration.test_data_pipelines.TestMultiModalPipelines" name="test_temporal_multi_omics_pipeline" time="0.002" /><testcase classname="tests.integration.test_data_pipelines.TestPipelineErrorHandling" name="test_pipeline_step_failure_recovery" time="0.002" /><testcase classname="tests.integration.test_data_pipelines.TestPipelineErrorHandling" name="test_pipeline_checkpoint_system" time="0.002" /><testcase classname="tests.integration.test_data_pipelines.TestPipelineErrorHandling" name="test_pipeline_rollback_mechanism" time="0.001" /><testcase classname="tests.integration.test_data_pipelines.TestPipelineErrorHandling" name="test_pipeline_parallel_execution_error_handling" time="0.002" /><testcase classname="tests.integration.test_data_pipelines.TestPipelinePerformance" name="test_pipeline_caching_system" time="0.216" /><testcase classname="tests.integration.test_data_pipelines.TestPipelinePerformance" name="test_pipeline_resource_optimization" time="0.002" /><testcase classname="tests.integration.test_data_pipelines.TestPipelinePerformance" name="test_pipeline_adaptive_scheduling" time="0.608" /><testcase classname="tests.integration.test_geo_download_workflows.TestGEODatasetDiscovery" name="test_geo_search_by_keywords" time="0.001" /><testcase classname="tests.integration.test_geo_download_workflows.TestGEODatasetDiscovery" name="test_geo_metadata_extraction" time="0.002" /><testcase classname="tests.integration.test_geo_download_workflows.TestGEODatasetDiscovery" name="test_dataset_compatibility_assessment" time="0.001" /><testcase classname="tests.integration.test_geo_download_workflows.TestGEOFileDownloadProcessing" name="test_sequential_file_download" time="0.006" /><testcase classname="tests.integration.test_geo_download_workflows.TestGEOFileDownloadProcessing" name="test_parallel_file_download" time="0.005" /><testcase classname="tests.integration.test_geo_download_workflows.TestGEOFileDownloadProcessing" name="test_file_format_detection_and_conversion" time="0.044" /><testcase classname="tests.integration.test_geo_download_workflows.TestGEOFileDownloadProcessing" name="test_download_progress_monitoring" time="0.006" /><testcase classname="tests.integration.test_geo_download_workflows.TestAutomatedProcessingPipelines" name="test_single_cell_geo_processing_pipeline" time="0.074" /><testcase classname="tests.integration.test_geo_download_workflows.TestAutomatedProcessingPipelines" name="test_bulk_rnaseq_geo_processing_pipeline" time="0.001" /><testcase classname="tests.integration.test_multi_omics_integration.TestBasicMultiOmicsIntegration" name="test_transcriptomics_proteomics_integration" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_multi_omics_integration.py:239: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_multi_omics_integration.TestBasicMultiOmicsIntegration" name="test_mudata_integration_workflow" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_multi_omics_integration.py:502: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_multi_omics_integration.TestBasicMultiOmicsIntegration" name="test_cross_platform_integration" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_multi_omics_integration.py:659: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_multi_omics_integration.TestSpatialMultiOmicsIntegration" name="test_spatial_transcriptomics_proteomics_integration" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_multi_omics_integration.py:919: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_multi_omics_integration.TestTemporalMultiOmicsIntegration" name="test_temporal_multi_omics_trajectory_analysis" time="0.000"><skipped type="pytest.skip" message="Proteomics agents in development">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_multi_omics_integration.py:1133: Proteomics agents in development</skipped></testcase><testcase classname="tests.integration.test_scvi_agent_handoff.TestScviHandoffWorkflow" name="test_singlecell_expert_handoff_request" time="0.000"><skipped type="pytest.skip" message="request_scvi_embedding tool is commented out in singlecell_expert.py (supervisor-mediated flow)">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_scvi_agent_handoff.py:58: request_scvi_embedding tool is commented out in singlecell_expert.py (supervisor-mediated flow)</skipped></testcase><testcase classname="tests.integration.test_scvi_agent_handoff.TestScviHandoffWorkflow" name="test_singlecell_expert_validates_modality" time="0.000"><skipped type="pytest.skip" message="request_scvi_embedding tool is commented out in singlecell_expert.py (supervisor-mediated flow)">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_scvi_agent_handoff.py:97: request_scvi_embedding tool is commented out in singlecell_expert.py (supervisor-mediated flow)</skipped></testcase><testcase classname="tests.integration.test_scvi_agent_handoff.TestScviHandoffWorkflow" name="test_ml_expert_scvi_availability_check" time="0.125"><failure message="AttributeError: 'CompiledStateGraph' object has no attribute 'tools'">self = &lt;tests.integration.test_scvi_agent_handoff.TestScviHandoffWorkflow object at 0x16fbe43e0&gt;
mock_data_manager = (&lt;MagicMock spec='DataManagerV2' id='12894187744'&gt;, &lt;MagicMock name='mock.get_modality()' spec='AnnData' id='5853176096'&gt;)

    @pytest.mark.skipif(not SCVI_AVAILABLE, reason="scVI dependencies not installed")
    def test_ml_expert_scvi_availability_check(self, mock_data_manager):
        """Test ML Expert scVI availability checking."""
        from lobster.agents.machine_learning_expert import machine_learning_expert
    
        data_manager, mock_adata = mock_data_manager
    
        # Create ML Expert agent
        ml_agent = machine_learning_expert(data_manager)
    
        # Get the check_scvi_availability tool
        check_tool = None
&gt;       for tool in ml_agent.tools:
                    ^^^^^^^^^^^^^^
E       AttributeError: 'CompiledStateGraph' object has no attribute 'tools'

tests/integration/test_scvi_agent_handoff.py:137: AttributeError</failure></testcase><testcase classname="tests.integration.test_scvi_agent_handoff.TestScviHandoffWorkflow" name="test_ml_expert_scvi_unavailable_message" time="0.000"><skipped type="pytest.skip" message="Testing unavailable scenario when scVI is installed">/Users/tyo/GITHUB/omics-os/lobster/tests/integration/test_scvi_agent_handoff.py:150: Testing unavailable scenario when scVI is installed</skipped></testcase><testcase classname="tests.integration.test_scvi_agent_handoff.TestScviHandoffWorkflow" name="test_clustering_service_use_rep_parameter" time="0.004" /><testcase classname="tests.integration.test_scvi_agent_handoff.TestEndToEndWorkflow" name="test_complete_workflow_without_scvi" time="0.146"><failure message="AttributeError: 'CompiledStateGraph' object has no attribute 'tools'">self = &lt;tests.integration.test_scvi_agent_handoff.TestEndToEndWorkflow object at 0x300319450&gt;
mock_data_manager = (&lt;MagicMock spec='DataManagerV2' id='12915628352'&gt;, &lt;MagicMock name='mock.get_modality()' spec='AnnData' id='12915630032'&gt;)

    def test_complete_workflow_without_scvi(self, mock_data_manager):
        """Test complete workflow when scVI is not available."""
        from lobster.agents.singlecell_expert import singlecell_expert
        from lobster.agents.machine_learning_expert import machine_learning_expert
    
        data_manager, mock_adata = mock_data_manager
    
        # Test SingleCell Expert handoff request
        sc_agent = singlecell_expert(data_manager)
        request_tool = None
&gt;       for tool in sc_agent.tools:
                    ^^^^^^^^^^^^^^
E       AttributeError: 'CompiledStateGraph' object has no attribute 'tools'

tests/integration/test_scvi_agent_handoff.py:244: AttributeError</failure></testcase><testcase classname="tests.integration.test_scvi_agent_handoff.TestEndToEndWorkflow" name="test_ml_expert_train_scvi_tool_structure" time="0.096"><failure message="AttributeError: 'CompiledStateGraph' object has no attribute 'tools'">self = &lt;tests.integration.test_scvi_agent_handoff.TestEndToEndWorkflow object at 0x3003196d0&gt;
mock_data_manager = (&lt;MagicMock spec='DataManagerV2' id='5863868128'&gt;, &lt;MagicMock name='mock.get_modality()' spec='AnnData' id='5863867120'&gt;)

    @pytest.mark.skipif(not SCVI_AVAILABLE, reason="Requires scVI installation")
    def test_ml_expert_train_scvi_tool_structure(self, mock_data_manager):
        """Test ML Expert scVI training tool exists and has correct structure."""
        from lobster.agents.machine_learning_expert import machine_learning_expert
    
        data_manager, mock_adata = mock_data_manager
    
        # Create ML Expert agent
        ml_agent = machine_learning_expert(data_manager)
    
        # Verify scVI tools exist
&gt;       tool_names = [getattr(tool, 'name', None) for tool in ml_agent.tools]
                                                              ^^^^^^^^^^^^^^
E       AttributeError: 'CompiledStateGraph' object has no attribute 'tools'

tests/integration/test_scvi_agent_handoff.py:280: AttributeError</failure></testcase><testcase classname="tests.integration.test_scvi_agent_handoff.TestEndToEndWorkflow" name="test_clustering_service_custom_embeddings_integration" time="0.003" /><testcase classname="tests.integration.test_scvi_agent_handoff.TestAgentToolIntegration" name="test_singlecell_expert_has_scvi_handoff" time="0.219"><failure message="AttributeError: 'CompiledStateGraph' object has no attribute 'tools'">self = &lt;tests.integration.test_scvi_agent_handoff.TestAgentToolIntegration object at 0x300319810&gt;
mock_data_manager = (&lt;MagicMock spec='DataManagerV2' id='12915637088'&gt;, &lt;MagicMock name='mock.get_modality()' spec='AnnData' id='12896431680'&gt;)

    def test_singlecell_expert_has_scvi_handoff(self, mock_data_manager):
        """Test SingleCell Expert includes scVI handoff tool."""
        from lobster.agents.singlecell_expert import singlecell_expert
    
        data_manager, mock_adata = mock_data_manager
    
        # Create agent
        agent = singlecell_expert(data_manager)
    
        # Verify scVI handoff tool exists
&gt;       tool_names = [getattr(tool, 'name', str(tool)) for tool in agent.tools]
                                                                   ^^^^^^^^^^^
E       AttributeError: 'CompiledStateGraph' object has no attribute 'tools'

tests/integration/test_scvi_agent_handoff.py:379: AttributeError</failure></testcase><testcase classname="tests.integration.test_scvi_agent_handoff.TestAgentToolIntegration" name="test_ml_expert_has_scvi_tools" time="0.088"><failure message="AttributeError: 'CompiledStateGraph' object has no attribute 'tools'">self = &lt;tests.integration.test_scvi_agent_handoff.TestAgentToolIntegration object at 0x300319950&gt;
mock_data_manager = (&lt;MagicMock spec='DataManagerV2' id='12915636752'&gt;, &lt;MagicMock name='mock.get_modality()' spec='AnnData' id='12915637760'&gt;)

    def test_ml_expert_has_scvi_tools(self, mock_data_manager):
        """Test ML Expert includes scVI tools."""
        from lobster.agents.machine_learning_expert import machine_learning_expert
    
        data_manager, mock_adata = mock_data_manager
    
        # Create agent
        agent = machine_learning_expert(data_manager)
    
        # Verify scVI tools exist
&gt;       tool_names = [getattr(tool, 'name', str(tool)) for tool in agent.tools]
                                                                   ^^^^^^^^^^^
E       AttributeError: 'CompiledStateGraph' object has no attribute 'tools'

tests/integration/test_scvi_agent_handoff.py:392: AttributeError</failure></testcase></testsuite></testsuites>